name: publish 

on:
  push:
    branches: ["main"]

env:
    REGISTRY: ghcr.io
    IMAGE_NAME: ${{github.actor}}/sep490-g13-code-fe:latest

jobs:
    publish:
        name: publish image 
        runs-on: ubuntu-lastest

        steps:
        - uses: actions/checkout@v3
        - name: login
          run: |
            echo ${{ secrets.PAT }} | docker login ghcr.io -u ${{ github.actor}} --password-stdin
        - name: Build and publish code
          run: |
            docker build . --tag ${{env.REGISTRY}}/${{env.IMAGE_NAME}}
            docker push ${{env.REGISTRY}}/${{env.IMAGE_NAME}}
